import{r as d,j as e}from"./ui-D9tbKjPW.js";import{u as j}from"./useQuery-BzYjs1Pn.js";import{c as O,b as B,a as V,u as F,g as Z,h as N,B as a,D as K,i as H,P as y,j as Q,k as R,l as G,m as U,I as J,C as w,G as W,f as k,H as h,S as X,q as C}from"./index-CDBdAGRq.js";import{B as T}from"./badge-C5aWu0Py.js";import{B as P}from"./bookmark-DfnSZTWa.js";import{L as Y}from"./lock-BN9co6Wy.js";import{E as S}from"./eye-DhW8Tp0m.js";import{S as _}from"./square-pen-CR6AToUO.js";import{T as ee}from"./trash-2-DkEfLvqz.js";import"./vendor-D3F3s8fL.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=O("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),L=d.forwardRef(({className:i,...l},r)=>e.jsx("textarea",{className:B("flex min-h-[120px] w-full rounded-xl border-2 border-gray-200 bg-white px-4 py-3 text-sm transition-all duration-200 placeholder:text-gray-400 hover:border-gray-300 focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-gray-50 resize-none shadow-sm",i),ref:r,...l}));L.displayName="Textarea";function me(){const{user:i}=V(),[,l]=F(),[r,g]=d.useState("my-collections"),[z,m]=d.useState(!1),[o,c]=d.useState({title:"",description:"",isPublic:!0}),{toast:n}=Z(),{data:b=[],isLoading:I}=j({queryKey:["/api/collections",i?.id],enabled:!!i?.id}),{data:v=[],isLoading:D}=j({queryKey:["/api/saved-looks",i?.id],enabled:!!i?.id}),q=[{id:1,title:"Looks d'été 2024",description:"Ma collection de tenues estivales fraîches et colorées",coverImage:"https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=400&h=400&fit=crop",looksCount:24,followersCount:156,isPublic:!0,createdAt:"2024-01-15T00:00:00Z"},{id:2,title:"Style Minimaliste",description:"Capsule wardrobe essentials et looks intemporels",coverImage:"https://images.unsplash.com/photo-1483985988355-763728e1935b?w=400&h=400&fit=crop",looksCount:18,followersCount:234,isPublic:!0,createdAt:"2024-02-20T00:00:00Z"},{id:3,title:"Soirées Chic",description:"Tenues élégantes pour occasions spéciales",coverImage:"https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=400&h=400&fit=crop",looksCount:12,followersCount:89,isPublic:!1,createdAt:"2024-03-10T00:00:00Z"}],$=[{id:1,title:"Street Style Parisien",coverImage:"https://images.unsplash.com/photo-1469334031218-e382a71b716b?w=400&h=400&fit=crop",creator:{name:"Sophie Martin",username:"@sophiestyle"},likesCount:456,savedAt:"2024-03-15T00:00:00Z"},{id:2,title:"Casual Chic Automne",coverImage:"https://images.unsplash.com/photo-1509631179647-0177331693ae?w=400&h=400&fit=crop",creator:{name:"Emma Dubois",username:"@emmafashion"},likesCount:892,savedAt:"2024-03-12T00:00:00Z"}],x=b.length>0?b:q,p=v.length>0?v:$,u=N({mutationFn:async s=>{const t=await fetch("/api/collections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});if(!t.ok)throw new Error("Failed to create collection");return t.json()},onSuccess:()=>{C.invalidateQueries({queryKey:["/api/collections"]}),n({title:"Collection créée",description:"Votre collection a été créée avec succès."}),m(!1),c({title:"",description:"",isPublic:!0})},onError:()=>{n({title:"Erreur",description:"Impossible de créer la collection.",variant:"destructive"})}}),f=N({mutationFn:async s=>{const t=await fetch(`/api/collections/${s}`,{method:"DELETE"});if(!t.ok)throw new Error("Failed to delete collection");return t.json()},onSuccess:()=>{C.invalidateQueries({queryKey:["/api/collections"]}),n({title:"Collection supprimée",description:"Votre collection a été supprimée avec succès."})},onError:()=>{n({title:"Erreur",description:"Impossible de supprimer la collection.",variant:"destructive"})}}),A=s=>{window.confirm("Êtes-vous sûr de vouloir supprimer cette collection ?")&&f.mutate(s)},M=()=>{if(!o.title.trim()){n({title:"Titre requis",description:"Veuillez entrer un titre pour votre collection.",variant:"destructive"});return}u.mutate(o)};return i?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-white to-purple-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-pink-100 to-purple-100 rounded-full px-4 py-2 mb-3",children:[e.jsx(P,{className:"w-4 h-4 text-pink-600"}),e.jsx("span",{className:"text-sm font-semibold text-purple-700",children:"Organisez votre inspiration"})]}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2 bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent",children:"Mes Collections"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Créez des collections thématiques et organisez vos looks préférés"})]}),e.jsxs(K,{open:z,onOpenChange:m,children:[e.jsx(H,{asChild:!0,children:e.jsxs(a,{"data-testid":"button-create-collection",size:"lg",className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white",children:[e.jsx(y,{className:"mr-2 h-5 w-5"}),"Nouvelle Collection"]})}),e.jsxs(Q,{children:[e.jsxs(R,{children:[e.jsx(G,{children:"Créer une nouvelle collection"}),e.jsx(U,{children:"Organisez vos looks favoris dans des collections thématiques"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Titre de la collection"}),e.jsx(J,{"data-testid":"input-collection-title",placeholder:"Ex: Looks d'été, Style minimaliste...",value:o.title,onChange:s=>c(t=>({...t,title:s.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Description"}),e.jsx(L,{"data-testid":"input-collection-description",placeholder:"Décrivez votre collection...",value:o.description,onChange:s=>c(t=>({...t,description:s.target.value})),rows:3})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{"data-testid":"checkbox-collection-public",type:"checkbox",id:"isPublic",checked:o.isPublic,onChange:s=>c(t=>({...t,isPublic:s.target.checked})),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"isPublic",className:"text-sm text-gray-700",children:"Rendre cette collection publique"})]}),e.jsx(a,{"data-testid":"button-submit-collection",onClick:M,disabled:u.isPending,className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white",children:u.isPending?"Création...":"Créer la collection"})]})]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{"data-testid":"tab-my-collections",onClick:()=>g("my-collections"),className:`py-3 px-1 border-b-2 font-medium text-sm sm:text-base ${r==="my-collections"?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Mes collections (",x.length,")"]}),e.jsxs("button",{"data-testid":"tab-saved-looks",onClick:()=>g("saved"),className:`py-3 px-1 border-b-2 font-medium text-sm sm:text-base ${r==="saved"?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Looks sauvegardés (",p.length,")"]})]})}),r==="my-collections"&&e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:I?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-4",children:"Chargement..."})]}):x.length>0?x.map(s=>e.jsxs(w,{className:"overflow-hidden hover:shadow-xl transition-shadow group","data-testid":`card-collection-${s.id}`,children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gray-100",children:[s.coverImage?e.jsx("img",{src:s.coverImage,alt:s.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(E,{className:"w-16 h-16 text-gray-300"})}),e.jsx("div",{className:"absolute top-3 right-3",children:s.isPublic?e.jsxs(T,{className:"bg-green-500 text-white",children:[e.jsx(W,{className:"w-3 h-3 mr-1"}),"Public"]}):e.jsxs(T,{variant:"secondary",children:[e.jsx(Y,{className:"w-3 h-3 mr-1"}),"Privé"]})})]}),e.jsxs(k,{className:"p-5",children:[e.jsx("h3",{className:"font-bold text-lg mb-2","data-testid":`text-collection-title-${s.id}`,children:s.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:s.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(E,{className:"w-4 h-4"}),e.jsxs("span",{children:[s.looksCount," looks"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"w-4 h-4"}),e.jsx("span",{children:s.followersCount})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(a,{"data-testid":`button-view-collection-${s.id}`,variant:"outline",size:"sm",className:"flex-1",onClick:()=>l(`/collections/${s.id}`),children:[e.jsx(S,{className:"w-4 h-4 mr-1"}),"Voir"]}),e.jsx(a,{"data-testid":`button-edit-collection-${s.id}`,variant:"outline",size:"sm",onClick:()=>{},children:e.jsx(_,{className:"w-4 h-4"})}),e.jsx(a,{"data-testid":`button-delete-collection-${s.id}`,variant:"outline",size:"sm",onClick:()=>A(s.id),className:"text-red-600 hover:text-red-700",disabled:f.isPending,children:e.jsx(ee,{className:"w-4 h-4"})})]})]})]},s.id)):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(P,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg mb-4",children:"Vous n'avez pas encore de collections"}),e.jsxs(a,{"data-testid":"button-create-first-collection",onClick:()=>m(!0),className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Créer ma première collection"]})]})}),r==="saved"&&e.jsx("div",{className:"grid md:grid-cols-3 lg:grid-cols-4 gap-6",children:D?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-4",children:"Chargement..."})]}):p.length>0?p.map(s=>e.jsxs(w,{className:"overflow-hidden hover:shadow-xl transition-shadow group","data-testid":`card-saved-look-${s.id}`,children:[e.jsx("div",{className:"relative aspect-[3/4] overflow-hidden",children:e.jsx("img",{src:s.coverImage,alt:s.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs(k,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold mb-1","data-testid":`text-look-title-${s.id}`,children:s.title}),e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["par ",s.creator.username]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"w-3 h-3 fill-current text-pink-500"}),e.jsx("span",{children:s.likesCount})]}),e.jsx(a,{"data-testid":`button-view-look-${s.id}`,variant:"ghost",size:"sm",onClick:()=>l(`/looks/${s.id}`),children:e.jsx(S,{className:"w-4 h-4"})})]})]})]},s.id)):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(h,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"Aucun look sauvegardé"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Explorez le feed et sauvegardez vos looks préférés"}),e.jsxs(a,{"data-testid":"button-explore-feed",onClick:()=>l("/feed"),className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Explorer le feed"]})]})})]})]}):e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Connexion requise"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Veuillez vous connecter pour voir vos collections"}),e.jsx(a,{onClick:()=>l("/login"),children:"Se connecter"})]})})}export{me as default};
