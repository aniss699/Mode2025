import{j as e,r as u}from"./ui-D9tbKjPW.js";import{g as p,B as i,e as g,X as h,C as x,o as b,p as j,f}from"./index-BlVuQgrH.js";import{S as k}from"./square-pen-DN0WDJZc.js";import"./vendor-D3F3s8fL.js";const v=({phase:t,prompt:c,onFeedback:a})=>{const{toast:o}=p(),r=async s=>{try{(await fetch("/api/ai-orchestrator/feedback",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phase:t,prompt:c,feedback:s})})).ok&&(o({title:"Merci pour votre retour !"}),a?.(s.accepted,s.rating,s.edits))}catch(l){console.error("Erreur feedback:",l),o({title:"Erreur lors de l'envoi",variant:"destructive"})}},d=()=>r({accepted:!0,rating:5}),n=()=>r({accepted:!1,rating:1}),m=()=>{const s=window.prompt("Indiquez vos modifications :");s&&r({accepted:!0,rating:3,edits:s})};return e.jsxs("div",{className:"flex gap-2 mt-2","data-testid":"ai-feedback-buttons",children:[e.jsxs(i,{size:"sm",variant:"outline",onClick:d,className:"text-green-600 hover:bg-green-50","data-testid":"button-keep-suggestion",children:[e.jsx(g,{className:"w-3 h-3 mr-1"}),"Garder"]}),e.jsxs(i,{size:"sm",variant:"outline",onClick:m,className:"text-blue-600 hover:bg-blue-50","data-testid":"button-modify-suggestion",children:[e.jsx(k,{className:"w-3 h-3 mr-1"}),"Modifier"]}),e.jsxs(i,{size:"sm",variant:"outline",onClick:n,className:"text-red-600 hover:bg-red-50","data-testid":"button-reject-suggestion",children:[e.jsx(h,{className:"w-3 h-3 mr-1"}),"Rejeter"]})]})};function T(){const[t,c]=u.useState(!1),[a,o]=u.useState("");return e.jsxs(x,{className:"max-w-lg mx-auto mt-8",children:[e.jsx(b,{children:e.jsx(j,{children:"Test des boutons de feedback AI"})}),e.jsxs(f,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600",children:'Cliquez sur "Afficher les boutons" pour voir les boutons de feedback AI.'}),e.jsxs(i,{onClick:()=>c(!t),"data-testid":"toggle-feedback-buttons",children:[t?"Masquer":"Afficher"," les boutons"]}),t&&e.jsxs("div",{className:"p-4 border rounded bg-gray-50",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Suggestion AI simulée :"}),e.jsx("p",{className:"text-sm mb-3",children:"Prix suggéré : 2500€ (basé sur vos critères)"}),e.jsx(v,{phase:"pricing",prompt:{projectTitle:"Test Project",description:"Test description",category:"development",suggestedPrice:2500},onFeedback:(r,d,n)=>{o(`Feedback reçu: ${r?"Accepté":"Rejeté"} (Note: ${d}/5)${n?` - Modifications: ${n}`:""}`)}})]}),a&&e.jsxs("div",{className:"p-3 bg-green-50 border border-green-200 rounded text-sm",children:[e.jsx("strong",{children:"Résultat :"})," ",a]})]})]})}export{T as default};
