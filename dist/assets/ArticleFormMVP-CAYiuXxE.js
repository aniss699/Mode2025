import{r as p,j as o}from"./ui-D9tbKjPW.js";import{I as w,B as x}from"./index-CDBdAGRq.js";const c="swideal_mvp_v1";function r(){try{const t=localStorage.getItem(c);if(!t){const e=g();return localStorage.setItem(c,JSON.stringify(e)),e}return JSON.parse(t)}catch{const e=g();return localStorage.setItem(c,JSON.stringify(e)),e}}function l(t){localStorage.setItem(c,JSON.stringify(t))}function g(){const t=[{id:"1",name:"Alice Dupont",avatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=200&h=200&fit=crop&crop=faces",bio:"Vintage lover"},{id:"2",name:"Marc Lemaire",avatar:"https://images.unsplash.com/photo-1545996124-1b1b8c8b1f5d?w=200&h=200&fit=crop&crop=faces",bio:"Minimalist"},{id:"me",name:"Toi (moi)",avatar:"",bio:"Mon dressing"}],e=[{id:"a1",userId:"1",title:"Veste en cuir",images:["https://images.unsplash.com/photo-1520975698510-1d0aebd3b286?w=800&h=800&fit=crop"],isPublic:!0,createdAt:new Date().toISOString(),likes:[]},{id:"a2",userId:"2",title:"Manteau long",images:["https://images.unsplash.com/photo-1514995669114-4f0b8b1d1f3a?w=800&h=800&fit=crop"],isPublic:!0,createdAt:new Date().toISOString(),likes:[]}];return{profiles:t,articles:e,following:[]}}const b={getState(){return r()},getProfiles(){return r().profiles},getArticles(){return r().articles},addArticle(t){const e=r();e.articles.unshift(t),l(e)},toggleLike(t,e){const s=r(),i=s.articles.find(u=>u.id===t);if(!i)return;i.likes=i.likes||[];const n=i.likes.indexOf(e);return n===-1?i.likes.push(e):i.likes.splice(n,1),l(s),i},addProfile(t){const e=r();e.profiles.push(t),l(e)},follow(t){const e=r();e.following.includes(t)||e.following.push(t),l(e)},unfollow(t){const e=r();e.following=e.following.filter(s=>s!==t),l(e)},getFollowing(){return r().following}};function v(){return"xxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function y({onSaved:t}){const[e,s]=p.useState(""),[i,n]=p.useState([]),u="me";async function m(a){a.preventDefault();const f=[];for(const h of i){const S=URL.createObjectURL(h);f.push(S)}const d={id:v(),userId:u,title:e||"Article sans titre",images:f,isPublic:!0,createdAt:new Date().toISOString(),likes:[]};b.addArticle(d),s(""),n([]),t&&t(d)}return o.jsxs("form",{onSubmit:m,className:"border rounded p-4 space-y-3 bg-white shadow-sm",children:[o.jsx("h3",{className:"font-semibold",children:"Ajouter un article Ã  ton dressing"}),o.jsx(w,{placeholder:"Titre (ex: Veste en jean)",value:e,onChange:a=>s(a.target.value)}),o.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:a=>n(Array.from(a.target.files||[]))}),o.jsxs("div",{className:"flex space-x-2",children:[o.jsx(x,{type:"submit",children:"Enregistrer"}),o.jsx(x,{variant:"ghost",onClick:()=>{s(""),n([])},children:"Annuler"})]})]})}export{y as A,b as m};
