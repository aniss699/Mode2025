import{r as u,j as e}from"./ui-D9tbKjPW.js";import{C as B,f as d}from"./calendar-CcIbq8S3.js";import{C as y,b as p,f,c as j,B as x,I as g,l as z}from"./index-BhnURYFB.js";import{B as N}from"./badge-Df8SQPIc.js";import{C as F}from"./clock-q3-gwJG4.js";import{T as E}from"./trash-2-CAXi8NdX.js";import{S as I}from"./save-CtHFMlX7.js";import{f as v}from"./fr-Qfl_UVRO.js";function L({readOnly:i=!1,initialAvailability:w=[],onSave:o}){const[a,C]=u.useState(new Date),[c,m]=u.useState(w.map(s=>({...s,date:typeof s.date=="string"?new Date(s.date):s.date}))),[l,n]=u.useState({start:"09:00",end:"17:00",rate:50}),h=s=>c.find(t=>d(t.date,"yyyy-MM-dd")===d(s,"yyyy-MM-dd")),M=()=>{if(!a)return;const s=h(a);m(s?t=>t.map(r=>d(r.date,"yyyy-MM-dd")===d(a,"yyyy-MM-dd")?{...r,slots:[...r.slots,{...l}]}:r):t=>[...t,{date:a,slots:[{...l}]}]),n({start:"09:00",end:"17:00",rate:50})},S=async s=>{o&&o(s)},A=s=>{a&&m(t=>t.map(r=>d(r.date,"yyyy-MM-dd")===d(a,"yyyy-MM-dd")?{...r,slots:r.slots.filter((H,T)=>T!==s)}:r).filter(r=>r.slots.length>0))},b=a?h(a):null,k={available:c.map(s=>s.date)},D={available:"bg-green-100 text-green-900 font-semibold"};return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(y,{className:"border-0 shadow-lg bg-gradient-to-br from-white to-blue-50",children:[e.jsx(p,{children:e.jsxs(f,{className:"flex items-center text-gray-800",children:[e.jsx(F,{className:"w-5 h-5 mr-2 text-blue-600"}),"Calendrier des disponibilités"]})}),e.jsxs(j,{children:[e.jsx(B,{mode:"single",selected:a,onSelect:C,locale:v,modifiers:k,modifiersClassNames:D,className:"rounded-lg border-0 shadow-inner bg-white p-4",disabled:i?void 0:s=>s<new Date}),e.jsx("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("span",{className:"w-3 h-3 bg-green-100 border border-green-300 rounded inline-block mr-2"}),"Jours disponibles"]})})]})]}),e.jsxs(y,{className:"border-0 shadow-lg bg-gradient-to-br from-white to-purple-50",children:[e.jsx(p,{children:e.jsx(f,{className:"text-gray-800",children:a?`Créneaux du ${d(a,"dd MMMM yyyy",{locale:v})}`:"Sélectionnez une date"})}),e.jsxs(j,{className:"space-y-4",children:[b&&b.slots.length>0?e.jsx("div",{className:"space-y-3",children:b.slots.map((s,t)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(N,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[s.start," - ",s.end]}),e.jsxs(N,{className:"bg-green-100 text-green-800",children:[s.rate,"€/h"]})]}),!i&&e.jsx(x,{variant:"ghost",size:"sm",onClick:()=>A(t),className:"text-red-500 hover:text-red-700 hover:bg-red-50",children:e.jsx(E,{className:"w-4 h-4"})})]},t))}):a?e.jsx("p",{className:"text-gray-500 text-center py-6 italic",children:"Aucun créneau défini pour cette date"}):e.jsx("p",{className:"text-gray-500 text-center py-6 italic",children:"Sélectionnez une date dans le calendrier"}),!i&&a&&e.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-800",children:"Ajouter un créneau"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Début"}),e.jsx(g,{type:"time",value:l.start,onChange:s=>n(t=>({...t,start:s.target.value})),className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Fin"}),e.jsx(g,{type:"time",value:l.end,onChange:s=>n(t=>({...t,end:s.target.value})),className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tarif (€/heure)"}),e.jsx(g,{type:"number",min:"0",step:"0.01",value:l.rate,onChange:s=>n(t=>({...t,rate:parseFloat(s.target.value)||0})),className:"border-gray-300 focus:border-blue-500 focus:ring-blue-500"})]}),e.jsxs(x,{onClick:M,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white",disabled:!l.start||!l.end||l.start>=l.end,children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Ajouter le créneau"]})]}),!i&&o&&e.jsxs(x,{onClick:()=>S(c),className:"w-full bg-green-600 hover:bg-green-700 text-white",children:[e.jsx(I,{className:"w-4 h-4 mr-2"}),"Sauvegarder les disponibilités"]})]})]})]})}export{L as A};
