import{r as h,j as e}from"./ui-D9tbKjPW.js";import{n as l,a as z,b as o,d as x,p as y,r as A,c as v,I as b,B as r,M as q}from"./index-PswBhxNd.js";import{A as w,a as M,b as C}from"./avatar-CJ42iv2D.js";import{S as P}from"./search-UcIwFbn6.js";import"./vendor-D3F3s8fL.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=l("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E=l("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=l("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=l("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=l("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=l("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);function G(){const{user:a}=z(),[c,D]=h.useState(null),[d,p]=h.useState(""),[T,k]=h.useState(""),i=[{id:"1",participantId:"1",participantName:"Marie Dubois",lastMessage:"Parfait, quand pouvons-nous commencer ?",lastMessageTime:new Date(Date.now()-1800*1e3),unreadCount:2,isOnline:!0,missionTitle:"Site web e-commerce"},{id:"2",participantId:"2",participantName:"Jean Martin",lastMessage:"J'ai quelques questions sur le projet",lastMessageTime:new Date(Date.now()-7200*1e3),unreadCount:0,isOnline:!1,missionTitle:"Application mobile"},{id:"3",participantId:"3",participantName:"Sophie Laurent",lastMessage:"Merci pour votre proposition",lastMessageTime:new Date(Date.now()-1440*60*1e3),unreadCount:1,isOnline:!0,missionTitle:"Logo et identité visuelle"}],u=[{id:"1",senderId:"1",senderName:"Marie Dubois",content:"Bonjour, j'ai vu votre candidature pour mon projet de site e-commerce.",timestamp:new Date(Date.now()-3600*1e3),isRead:!0},{id:"2",senderId:a?.id||"",senderName:a?.name||"",content:"Bonjour Marie ! Merci pour votre message. Je serais ravi de discuter de votre projet.",timestamp:new Date(Date.now()-2700*1e3),isRead:!0},{id:"3",senderId:"1",senderName:"Marie Dubois",content:"Parfait, quand pouvons-nous commencer ?",timestamp:new Date(Date.now()-1800*1e3),isRead:!1}],t=i.find(s=>s.id===c),S=c?u:[],j=()=>{if(d.trim()&&c){const s={id:Date.now().toString(),senderId:a?.id||"",senderName:a?.name||"",content:d.trim(),timestamp:new Date,isRead:!0};u.push(s);const n=i.findIndex(m=>m.id===c);n!==-1&&(i[n].lastMessage=d.trim(),i[n].lastMessageTime=new Date),p("")}},g=s=>{const m=new Date().getTime()-s.getTime(),N=Math.floor(m/6e4),f=Math.floor(m/36e5),I=Math.floor(m/864e5);return N<60?`${N}min`:f<24?`${f}h`:`${I}j`};return a?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Messages"}),e.jsx("p",{className:"text-gray-600",children:"Communiquez avec vos clients et prestataires"})]}),e.jsxs("div",{className:"grid lg:grid-cols-12 gap-6 h-[calc(100vh-12rem)]",children:[e.jsx("div",{className:"lg:col-span-4",children:e.jsxs(o,{className:"h-full",children:[e.jsxs(y,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(A,{className:"text-lg",children:"Conversations"}),e.jsx(v,{variant:"secondary",children:i.length})]}),e.jsxs("div",{className:"relative",children:[e.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(b,{placeholder:"Rechercher une conversation...",value:T,onChange:s=>k(s.target.value),className:"pl-10"})]})]}),e.jsx(x,{className:"p-0",children:e.jsx("div",{className:"space-y-1",children:i.map(s=>e.jsx("div",{onClick:()=>D(s.id),className:`p-4 cursor-pointer hover:bg-gray-50 border-l-4 transition-all ${c===s.id?"bg-blue-50 border-l-blue-500":"border-l-transparent"}`,children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsxs("div",{className:"relative",children:[e.jsxs(w,{className:"w-10 h-10",children:[e.jsx(M,{src:s.participantAvatar}),e.jsx(C,{children:s.participantName.split(" ").map(n=>n[0]).join("")})]}),s.isOnline&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-3 h-3 bg-green-500 rounded-full border-2 border-white"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"font-medium text-gray-900 truncate",children:s.participantName}),e.jsx("span",{className:"text-xs text-gray-500",children:g(s.lastMessageTime)})]}),s.missionTitle&&e.jsx("p",{className:"text-xs text-blue-600 mb-1",children:s.missionTitle}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.lastMessage}),s.unreadCount>0&&e.jsx(v,{className:"bg-red-500 text-white text-xs px-1.5 py-0.5 min-w-[1.25rem] h-5",children:s.unreadCount})]})]})]})},s.id))})})]})}),e.jsx("div",{className:"lg:col-span-8",children:t?e.jsxs(o,{className:"h-full flex flex-col",children:[e.jsxs(y,{className:"border-b",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs(w,{className:"w-10 h-10",children:[e.jsx(M,{src:t.participantAvatar}),e.jsx(C,{children:t.participantName.split(" ").map(s=>s[0]).join("")})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:t.participantName}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t.isOnline?"bg-green-500":"bg-gray-400"}`}),e.jsx("span",{className:"text-xs text-gray-500",children:t.isOnline?"En ligne":"Hors ligne"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(r,{variant:"ghost",size:"sm",children:e.jsx(O,{className:"w-4 h-4"})}),e.jsx(r,{variant:"ghost",size:"sm",children:e.jsx(L,{className:"w-4 h-4"})}),e.jsx(r,{variant:"ghost",size:"sm",children:e.jsx($,{className:"w-4 h-4"})})]})]}),t.missionTitle&&e.jsx("div",{className:"bg-blue-50 p-3 rounded-lg",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Projet :"})," ",t.missionTitle]})})]}),e.jsx(x,{className:"flex-1 overflow-y-auto p-4 space-y-4",children:S.map(s=>e.jsx("div",{className:`flex ${s.senderId===a.id?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-xs lg:max-w-md px-4 py-2 rounded-lg ${s.senderId===a.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-900"}`,children:[e.jsx("p",{className:"text-sm",children:s.content}),e.jsx("p",{className:`text-xs mt-1 ${s.senderId===a.id?"text-blue-100":"text-gray-500"}`,children:g(s.timestamp)})]})},s.id))}),e.jsx("div",{className:"border-t p-4",children:e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsx(r,{variant:"ghost",size:"sm",children:e.jsx(E,{className:"w-4 h-4"})}),e.jsx("div",{className:"flex-1",children:e.jsx(b,{value:d,onChange:s=>p(s.target.value),placeholder:"Tapez votre message...",onKeyPress:s=>s.key==="Enter"&&j(),className:"resize-none"})}),e.jsx(r,{variant:"ghost",size:"sm",children:e.jsx(B,{className:"w-4 h-4"})}),e.jsx(r,{onClick:j,disabled:!d.trim(),children:e.jsx(R,{className:"w-4 h-4"})})]})})]}):e.jsx(o,{className:"h-full",children:e.jsx(x,{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(q,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Sélectionnez une conversation"}),e.jsx("p",{className:"text-gray-600",children:"Choisissez une conversation dans la liste pour commencer à discuter"})]})})})})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsx(o,{className:"max-w-md w-full mx-4",children:e.jsxs(x,{className:"p-8 text-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Connexion requise"}),e.jsx("p",{className:"text-gray-600",children:"Connectez-vous pour accéder à vos messages"})]})})})}export{G as default};
