import{r as d,j as e}from"./ui-D9tbKjPW.js";import{u as T}from"./useQuery-I-QD4b4i.js";import{c as Y,b as _,a as ee,u as te,g as se,h as f,B as a,i as S,D as I,j as ie,P as z,k as D,l as L,m as q,n as $,I as M,C as O,G as ae,f as A,H as j,S as le,q as y}from"./index-BlVuQgrH.js";import{B as F}from"./badge-BxxlN7Ib.js";import{L as oe}from"./lock-BWqgKW3D.js";import{E as V}from"./eye-Bg2gGJmh.js";import{S as re}from"./square-pen-DN0WDJZc.js";import{T as ne}from"./trash-2-CRwEE6oM.js";import"./vendor-D3F3s8fL.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=Y("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),N=d.forwardRef(({className:o,...r},n)=>e.jsx("textarea",{className:_("flex min-h-[120px] w-full rounded-xl border-2 border-gray-200 bg-white px-4 py-3 text-sm transition-all duration-200 placeholder:text-gray-400 hover:border-gray-300 focus:border-blue-500 focus:outline-none focus:ring-4 focus:ring-blue-100 disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-gray-50 resize-none shadow-sm",o),ref:n,...r}));N.displayName="Textarea";function ve(){const{user:o}=ee(),[,r]=te(),[n,w]=d.useState("my-collections"),[K,x]=d.useState(!1),[Z,u]=d.useState(!1),[s,c]=d.useState(null),[m,p]=d.useState({title:"",description:"",isPublic:!0}),{toast:l}=se(),{data:k=[],isLoading:H}=T({queryKey:["/api/collections",o?.id],enabled:!!o?.id}),{data:C=[],isLoading:Q}=T({queryKey:["/api/saved-looks",o?.id],enabled:!!o?.id}),R=[{id:1,title:"Looks d'été 2024",description:"Ma collection de tenues estivales fraîches et colorées",coverImage:"https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?w=400&h=400&fit=crop",looksCount:24,followersCount:156,isPublic:!0,createdAt:"2024-01-15T00:00:00Z"},{id:2,title:"Style Minimaliste",description:"Capsule wardrobe essentials et looks intemporels",coverImage:"https://images.unsplash.com/photo-1483985988355-763728e1935b?w=400&h=400&fit=crop",looksCount:18,followersCount:234,isPublic:!0,createdAt:"2024-02-20T00:00:00Z"},{id:3,title:"Soirées Chic",description:"Tenues élégantes pour occasions spéciales",coverImage:"https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=400&h=400&fit=crop",looksCount:12,followersCount:89,isPublic:!1,createdAt:"2024-03-10T00:00:00Z"}],U=[{id:1,title:"Street Style Parisien",coverImage:"https://images.unsplash.com/photo-1469334031218-e382a71b716b?w=400&h=400&fit=crop",creator:{name:"Sophie Martin",username:"@sophiestyle"},likesCount:456,savedAt:"2024-03-15T00:00:00Z"},{id:2,title:"Casual Chic Automne",coverImage:"https://images.unsplash.com/photo-1509631179647-0177331693ae?w=400&h=400&fit=crop",creator:{name:"Emma Dubois",username:"@emmafashion"},likesCount:892,savedAt:"2024-03-12T00:00:00Z"}],h=k.length>0?k:R,g=C.length>0?C:U,b=f({mutationFn:async t=>{const i=await fetch("/api/collections",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!i.ok)throw new Error("Failed to create collection");return i.json()},onSuccess:()=>{y.invalidateQueries({queryKey:["/api/collections"]}),l({title:"Collection créée",description:"Votre collection a été créée avec succès."}),x(!1),p({title:"",description:"",isPublic:!0})},onError:()=>{l({title:"Erreur",description:"Impossible de créer la collection.",variant:"destructive"})}}),P=f({mutationFn:async t=>{const i=await fetch(`/api/collections/${t}`,{method:"DELETE"});if(!i.ok)throw new Error("Failed to delete collection");return i.json()},onSuccess:()=>{y.invalidateQueries({queryKey:["/api/collections"]}),l({title:"Collection supprimée",description:"Votre collection a été supprimée avec succès."})},onError:()=>{l({title:"Erreur",description:"Impossible de supprimer la collection.",variant:"destructive"})}}),v=f({mutationFn:async({id:t,data:i})=>{const E=await fetch(`/api/collections/${t}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!E.ok)throw new Error("Failed to update collection");return E.json()},onSuccess:()=>{y.invalidateQueries({queryKey:["/api/collections"]}),l({title:"Collection modifiée",description:"Votre collection a été mise à jour avec succès."}),u(!1),c(null)},onError:()=>{l({title:"Erreur",description:"Impossible de modifier la collection.",variant:"destructive"})}}),G=t=>{window.confirm("Êtes-vous sûr de vouloir supprimer cette collection ?")&&P.mutate(t)},J=()=>{if(!m.title.trim()){l({title:"Titre requis",description:"Veuillez entrer un titre pour votre collection.",variant:"destructive"});return}b.mutate(m)},W=t=>{c(t),u(!0)},X=()=>{if(!s||!s.title.trim()){l({title:"Titre requis",description:"Veuillez entrer un titre pour votre collection.",variant:"destructive"});return}v.mutate({id:s.id,data:{title:s.title,description:s.description,isPublic:s.isPublic}})};return o?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-white to-purple-50",children:[e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-flex items-center gap-2 bg-gradient-to-r from-pink-100 to-purple-100 rounded-full px-4 py-2 mb-3",children:[e.jsx(S,{className:"w-4 h-4 text-pink-600"}),e.jsx("span",{className:"text-sm font-semibold text-purple-700",children:"Organisez votre inspiration"})]}),e.jsx("h1",{className:"text-3xl sm:text-4xl font-bold mb-2 bg-gradient-to-r from-pink-600 to-purple-600 bg-clip-text text-transparent",children:"Mes Collections"}),e.jsx("p",{className:"text-lg text-gray-600",children:"Créez des collections thématiques et organisez vos looks préférés"})]}),e.jsxs(I,{open:K,onOpenChange:x,children:[e.jsx(ie,{asChild:!0,children:e.jsxs(a,{"data-testid":"button-create-collection",size:"lg",className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white",children:[e.jsx(z,{className:"mr-2 h-5 w-5"}),"Nouvelle Collection"]})}),e.jsxs(D,{children:[e.jsxs(L,{children:[e.jsx(q,{children:"Créer une nouvelle collection"}),e.jsx($,{children:"Organisez vos looks favoris dans des collections thématiques"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Titre de la collection"}),e.jsx(M,{"data-testid":"input-collection-title",placeholder:"Ex: Looks d'été, Style minimaliste...",value:m.title,onChange:t=>p(i=>({...i,title:t.target.value}))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Description"}),e.jsx(N,{"data-testid":"input-collection-description",placeholder:"Décrivez votre collection...",value:m.description,onChange:t=>p(i=>({...i,description:t.target.value})),rows:3})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{"data-testid":"checkbox-collection-public",type:"checkbox",id:"isPublic",checked:m.isPublic,onChange:t=>p(i=>({...i,isPublic:t.target.checked})),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"isPublic",className:"text-sm text-gray-700",children:"Rendre cette collection publique"})]}),e.jsx(a,{"data-testid":"button-submit-collection",onClick:J,disabled:b.isPending,className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white",children:b.isPending?"Création...":"Créer la collection"})]})]})]})]})})}),e.jsx(I,{open:Z,onOpenChange:t=>{u(t),t||c(null)},children:e.jsxs(D,{children:[e.jsxs(L,{children:[e.jsx(q,{children:"Modifier la collection"}),e.jsx($,{children:"Modifiez les informations de votre collection"})]}),s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Titre de la collection"}),e.jsx(M,{"data-testid":"input-edit-collection-title",placeholder:"Ex: Looks d'été, Style minimaliste...",value:s.title,onChange:t=>c({...s,title:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 mb-2 block",children:"Description"}),e.jsx(N,{"data-testid":"input-edit-collection-description",placeholder:"Décrivez votre collection...",value:s.description,onChange:t=>c({...s,description:t.target.value}),rows:3})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{"data-testid":"checkbox-edit-collection-public",type:"checkbox",id:"editIsPublic",checked:s.isPublic,onChange:t=>c({...s,isPublic:t.target.checked}),className:"rounded border-gray-300"}),e.jsx("label",{htmlFor:"editIsPublic",className:"text-sm text-gray-700",children:"Rendre cette collection publique"})]}),e.jsx(a,{"data-testid":"button-update-collection",onClick:X,disabled:v.isPending,className:"w-full bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white",children:v.isPending?"Modification...":"Enregistrer les modifications"})]})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"border-b border-gray-200 mb-8",children:e.jsxs("nav",{className:"-mb-px flex space-x-8",children:[e.jsxs("button",{"data-testid":"tab-my-collections",onClick:()=>w("my-collections"),className:`py-3 px-1 border-b-2 font-medium text-sm sm:text-base ${n==="my-collections"?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Mes collections (",h.length,")"]}),e.jsxs("button",{"data-testid":"tab-saved-looks",onClick:()=>w("saved"),className:`py-3 px-1 border-b-2 font-medium text-sm sm:text-base ${n==="saved"?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:["Looks sauvegardés (",g.length,")"]})]})}),n==="my-collections"&&e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:H?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-4",children:"Chargement..."})]}):h.length>0?h.map(t=>e.jsxs(O,{className:"overflow-hidden hover:shadow-xl transition-shadow group","data-testid":`card-collection-${t.id}`,children:[e.jsxs("div",{className:"relative aspect-square overflow-hidden bg-gray-100",children:[t.coverImage?e.jsx("img",{src:t.coverImage,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(B,{className:"w-16 h-16 text-gray-300"})}),e.jsx("div",{className:"absolute top-3 right-3",children:t.isPublic?e.jsxs(F,{className:"bg-green-500 text-white",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),"Public"]}):e.jsxs(F,{variant:"secondary",children:[e.jsx(oe,{className:"w-3 h-3 mr-1"}),"Privé"]})})]}),e.jsxs(A,{className:"p-5",children:[e.jsx("h3",{className:"font-bold text-lg mb-2","data-testid":`text-collection-title-${t.id}`,children:t.title}),e.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.looksCount," looks"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{children:t.followersCount})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(a,{"data-testid":`button-view-collection-${t.id}`,variant:"outline",size:"sm",className:"flex-1",onClick:()=>r(`/collections/${t.id}`),children:[e.jsx(V,{className:"w-4 h-4 mr-1"}),"Voir"]}),e.jsx(a,{"data-testid":`button-edit-collection-${t.id}`,variant:"outline",size:"sm",onClick:()=>W(t),children:e.jsx(re,{className:"w-4 h-4"})}),e.jsx(a,{"data-testid":`button-delete-collection-${t.id}`,variant:"outline",size:"sm",onClick:()=>G(t.id),className:"text-red-600 hover:text-red-700",disabled:P.isPending,children:e.jsx(ne,{className:"w-4 h-4"})})]})]})]},t.id)):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(S,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg mb-4",children:"Vous n'avez pas encore de collections"}),e.jsxs(a,{"data-testid":"button-create-first-collection",onClick:()=>x(!0),className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Créer ma première collection"]})]})}),n==="saved"&&e.jsx("div",{className:"grid md:grid-cols-3 lg:grid-cols-4 gap-6",children:Q?e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-pink-600 mx-auto"}),e.jsx("p",{className:"text-gray-500 mt-4",children:"Chargement..."})]}):g.length>0?g.map(t=>e.jsxs(O,{className:"overflow-hidden hover:shadow-xl transition-shadow group","data-testid":`card-saved-look-${t.id}`,children:[e.jsx("div",{className:"relative aspect-[3/4] overflow-hidden",children:e.jsx("img",{src:t.coverImage,alt:t.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),e.jsxs(A,{className:"p-4",children:[e.jsx("h4",{className:"font-semibold mb-1","data-testid":`text-look-title-${t.id}`,children:t.title}),e.jsxs("p",{className:"text-xs text-gray-500 mb-2",children:["par ",t.creator.username]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(j,{className:"w-3 h-3 fill-current text-pink-500"}),e.jsx("span",{children:t.likesCount})]}),e.jsx(a,{"data-testid":`button-view-look-${t.id}`,variant:"ghost",size:"sm",onClick:()=>r(`/looks/${t.id}`),children:e.jsx(V,{className:"w-4 h-4"})})]})]})]},t.id)):e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx(j,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg mb-2",children:"Aucun look sauvegardé"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Explorez le feed et sauvegardez vos looks préférés"}),e.jsxs(a,{"data-testid":"button-explore-feed",onClick:()=>r("/feed"),className:"bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 text-white",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Explorer le feed"]})]})})]})]}):e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Connexion requise"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Veuillez vous connecter pour voir vos collections"}),e.jsx(a,{onClick:()=>r("/login"),children:"Se connecter"})]})})}export{ve as default};
