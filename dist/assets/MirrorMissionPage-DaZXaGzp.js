import{r as y,j as e}from"./ui-D9tbKjPW.js";import{u as w,t as C,o as P,F as S,a as i,b as t,c as l,d as n,e as o,s as c,h as T,n as M}from"./types-B-ElE_6F.js";import{d as z,g as F,C as B,b as q,i as L,U as D,c as V,I as m,Z as k,l as h,B as E}from"./index-LqObwSZ0.js";import{T as p}from"./textarea-C0reNeNn.js";import{S as I,a as R,b as A,c as O,d as J}from"./select-MIOaZk66.js";import{B as d}from"./badge-BEVVyNLE.js";import{S as U}from"./switch-HA3idyS_.js";import{E as Z}from"./euro-BKznP4rd.js";import{M as H}from"./map-pin-BnnDgSXm.js";import{L as $}from"./loader-circle-B5q4zi-v.js";import"./vendor-D3F3s8fL.js";import"./index-DLM4OUNl.js";import"./chevron-up-D9o5Fi3V.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v=z("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),G=P({projectTitle:c().min(5,"Le titre doit faire au moins 5 caractères"),category:c().min(1,"Veuillez sélectionner une catégorie"),description:c().min(50,"La description doit faire au moins 50 caractères"),budgetPerProvider:M().min(100,"Le budget par prestataire minimum est de 100€"),deadline:c().min(1,"Veuillez définir une date limite"),location:c().min(1,"La localisation est requise"),allowSameProvider:T().default(!1),evaluationCriteria:c().min(20,"Détaillez les critères d'évaluation"),deliverables:c().min(20,"Précisez les livrables attendus")}),K=["Développement web","Design graphique","Marketing digital","Rédaction","Consulting","Traduction","Formation","Architecture","Photographie","Vidéo"];function oe(){const[u,j]=y.useState(!1),{toast:g}=F(),r=w({resolver:C(G),defaultValues:{projectTitle:"",category:"",description:"",budgetPerProvider:1e3,deadline:"",location:"",allowSameProvider:!1,evaluationCriteria:"",deliverables:""}}),x=r.watch("budgetPerProvider"),b=x*2,f=async s=>{j(!0);try{const a=await fetch("/api/missions",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({title:s.projectTitle,description:s.description,category:s.category,budget:s.budgetPerProvider.toString(),location:s.location,urgency:"medium",requirements:JSON.stringify({mirrorMode:!0,budgetPerProvider:s.budgetPerProvider,allowSameProvider:s.allowSameProvider,evaluationCriteria:s.evaluationCriteria,deliverables:s.deliverables,deadline:s.deadline})})});if(!a.ok)throw new Error("Erreur lors de la création de la mission miroir");const N=await a.json();g({title:"Mission Miroir créée !",description:"Deux prestataires vont maintenant travailler en parallèle sur votre projet."}),r.reset(),setTimeout(()=>{window.location.href=`/missions/${N.id}`},1500)}catch{g({title:"Erreur",description:"Impossible de créer la mission miroir. Réessayez.",variant:"destructive"})}finally{j(!1)}};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-emerald-50 to-teal-50 py-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-block p-4 bg-gradient-to-r from-emerald-500 to-teal-500 rounded-full mb-4",children:e.jsx(v,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Mission Miroir"}),e.jsx("p",{className:"text-gray-600",children:"Deux prestataires, deux solutions, vous choisissez la meilleure"})]}),e.jsxs(B,{children:[e.jsx(q,{children:e.jsxs(L,{className:"flex items-center space-x-2",children:[e.jsx(D,{className:"w-5 h-5 text-emerald-600"}),e.jsx("span",{children:"Créer votre mission miroir"})]})}),e.jsx(V,{children:e.jsx(S,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(f),className:"space-y-6",children:[e.jsx(i,{control:r.control,name:"projectTitle",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Titre du projet"}),e.jsx(n,{children:e.jsx(m,{placeholder:"Ex: Développement site e-commerce responsive",...s})}),e.jsx(o,{})]})}),e.jsx(i,{control:r.control,name:"category",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Catégorie"}),e.jsxs(I,{onValueChange:s.onChange,defaultValue:s.value,children:[e.jsx(n,{children:e.jsx(R,{children:e.jsx(A,{placeholder:"Sélectionnez une catégorie"})})}),e.jsx(O,{children:K.map(a=>e.jsx(J,{value:a,children:a},a))})]}),e.jsx(o,{})]})}),e.jsx(i,{control:r.control,name:"description",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Description détaillée du projet"}),e.jsx(n,{children:e.jsx(p,{placeholder:"Décrivez précisément ce que vous attendez, les fonctionnalités, les contraintes...",className:"min-h-[120px]",...s})}),e.jsx(o,{})]})}),e.jsx(i,{control:r.control,name:"deliverables",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Livrables attendus"}),e.jsx(n,{children:e.jsx(p,{placeholder:"Spécifiez exactement ce que chaque prestataire doit livrer...",className:"min-h-[100px]",...s})}),e.jsx(o,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx(i,{control:r.control,name:"budgetPerProvider",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Budget par prestataire (€)"}),e.jsx(n,{children:e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(m,{type:"number",min:100,placeholder:"1000",className:"pl-10",...s,onChange:a=>s.onChange(Number(a.target.value))})]})}),e.jsx(o,{})]})}),e.jsx(i,{control:r.control,name:"deadline",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Date limite de livraison"}),e.jsx(n,{children:e.jsx(m,{type:"datetime-local",...s})}),e.jsx(o,{})]})})]}),e.jsx(i,{control:r.control,name:"location",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Localisation préférée"}),e.jsx(n,{children:e.jsxs("div",{className:"relative",children:[e.jsx(H,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(m,{placeholder:"Paris, Lyon, France, ou Remote",className:"pl-10",...s})]})}),e.jsx(o,{})]})}),e.jsx(i,{control:r.control,name:"evaluationCriteria",render:({field:s})=>e.jsxs(t,{children:[e.jsx(l,{children:"Critères d'évaluation"}),e.jsx(n,{children:e.jsx(p,{placeholder:"Sur quels critères allez-vous évaluer et comparer les deux solutions ? (qualité, innovation, rapidité...)",className:"min-h-[100px]",...s})}),e.jsx(o,{})]})}),e.jsx(i,{control:r.control,name:"allowSameProvider",render:({field:s})=>e.jsxs(t,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(l,{className:"text-base",children:"Autoriser le même prestataire"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Permettre qu'un même prestataire propose deux solutions différentes"})]}),e.jsx(n,{children:e.jsx(U,{checked:s.value,onCheckedChange:s.onChange})})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 rounded-lg p-4 border border-emerald-200",children:[e.jsx("h4",{className:"font-semibold text-emerald-900 mb-3",children:"Récapitulatif financier"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Budget prestataire A:"}),e.jsxs(d,{variant:"secondary",className:"bg-emerald-100 text-emerald-700",children:[x||0,"€"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{children:"Budget prestataire B:"}),e.jsxs(d,{variant:"secondary",className:"bg-emerald-100 text-emerald-700",children:[x||0,"€"]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm font-semibold border-t pt-2",children:[e.jsx("span",{children:"Budget total:"}),e.jsxs(d,{variant:"default",className:"bg-emerald-600",children:[b,"€"]})]})]})]}),e.jsxs("div",{className:"bg-emerald-50 rounded-lg p-4 border border-emerald-200",children:[e.jsx("h4",{className:"font-semibold text-emerald-900 mb-2",children:"Comment ça marche ?"}),e.jsxs("div",{className:"space-y-2 text-sm text-emerald-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",className:"bg-emerald-100",children:"1"}),e.jsx("span",{children:"Deux prestataires différents travaillent simultanément sur votre projet"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",className:"bg-emerald-100",children:"2"}),e.jsx("span",{children:"Chacun développe sa propre approche et solution"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",className:"bg-emerald-100",children:"3"}),e.jsx("span",{children:"Vous recevez deux livrables complets à comparer"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(d,{variant:"outline",className:"bg-emerald-100",children:"4"}),e.jsx("span",{children:"Vous payez les deux prestataires et choisissez la solution à retenir"})]})]})]}),e.jsx("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(k,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-yellow-900 mb-1",children:"Avantages de la Mission Miroir"}),e.jsxs("ul",{className:"text-sm text-yellow-800 space-y-1",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-3 h-3"}),"Maximise vos chances d'obtenir la solution parfaite"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-3 h-3"}),"Compare différentes approches créatives et techniques"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"w-3 h-3"}),"Réduit les risques projet grâce à la redondance"]})]})]})]})}),e.jsx(E,{type:"submit",disabled:u,className:"w-full bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 py-3 text-lg font-semibold",children:u?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"w-5 h-5 mr-2 animate-spin"}),"Création en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{className:"w-5 h-5 mr-2"}),"Créer la mission miroir"]})})]})})})]})]})})}export{oe as default};
